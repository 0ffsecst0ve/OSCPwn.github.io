<!doctype html><html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>priv esc with artisan</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="styles.css" type="text/css" />
</head>
<body><div class="main"><div class="tree">
<p><a href="../HacktheBox--Linux_Boxes.html">Linux Boxes</a></p>
<p><a href="HacktheBox--Linux_Boxes--cronos.html">cronos</a></p>

<ol>
<li><a href="HacktheBox--Linux_Boxes--cronos--nmap.html">nmap</a></li>
<li><a href="HacktheBox--Linux_Boxes--cronos--http.html">http</a></li>
<ol>
<li><a href="HacktheBox--Linux_Boxes--cronos--http--vi_-etc-hosts.html">vi /etc/hosts</a></li>
</ol>
<li><a href="HacktheBox--Linux_Boxes--cronos--dns_xfer_(dig).html">dns xfer (dig)</a></li>
<ol>
<li><a href="HacktheBox--Linux_Boxes--cronos--dns_xfer_(dig)--www.cronos.htb.html">www.cronos.htb</a></li>
<li><a href="HacktheBox--Linux_Boxes--cronos--dns_xfer_(dig)--ns1.cronos.htb.html">ns1.cronos.htb</a></li>
<li><a href="HacktheBox--Linux_Boxes--cronos--dns_xfer_(dig)--admin.cronos.htb.html">admin.cronos.htb</a></li>
</ol>
<li><a href="HacktheBox--Linux_Boxes--cronos--initial_foothold.html">initial foothold</a></li>
<ol>
<li><a href="HacktheBox--Linux_Boxes--cronos--initial_foothold--sqlmap_admin.cronos.htb.html">sqlmap admin.cronos.htb</a></li>
<ol>
<li><a href="HacktheBox--Linux_Boxes--cronos--initial_foothold--sqlmap_admin.cronos.htb--login.req.html">login.req</a></li>
<li><a href="HacktheBox--Linux_Boxes--cronos--initial_foothold--sqlmap_admin.cronos.htb--sqlmap_-r_login.req.html">sqlmap -r login.req</a></li>
</ol>
<li><a href="HacktheBox--Linux_Boxes--cronos--initial_foothold--manual_admin.cronos_SQL_injection.html">manual admin.cronos SQL injection</a></li>
<li><a href="HacktheBox--Linux_Boxes--cronos--initial_foothold--command_execution.html">command execution</a></li>
<ol>
<li><a href="HacktheBox--Linux_Boxes--cronos--initial_foothold--command_execution--burp_repeater.html">burp repeater</a></li>
<li><a href="HacktheBox--Linux_Boxes--cronos--initial_foothold--command_execution--pentest_monkey_reverse_shell_cheat_sheet.html">pentest monkey reverse shell cheat sheet</a></li>
<ol>
<li><a href="HacktheBox--Linux_Boxes--cronos--initial_foothold--command_execution--pentest_monkey_reverse_shell_cheat_sheet--burp.html">burp</a></li>
<li><a href="HacktheBox--Linux_Boxes--cronos--initial_foothold--command_execution--pentest_monkey_reverse_shell_cheat_sheet--nc_listener.html">nc listener</a></li>
</ol>
<li><a href="HacktheBox--Linux_Boxes--cronos--initial_foothold--command_execution--reverse_shell.html">reverse shell</a></li>
</ol>
</ol>
<li><a href="HacktheBox--Linux_Boxes--cronos--Enumeration.html">Enumeration</a></li>
<ol>
<li><a href="HacktheBox--Linux_Boxes--cronos--Enumeration---dev-shm.html">/dev/shm</a></li>
<ol>
<li><a href="HacktheBox--Linux_Boxes--cronos--Enumeration---dev-shm--download_LinEnum.html">download LinEnum</a></li>
<li><a href="HacktheBox--Linux_Boxes--cronos--Enumeration---dev-shm--run_LinEnum.html">run LinEnum</a></li>
<ol>
<li><a href="HacktheBox--Linux_Boxes--cronos--Enumeration---dev-shm--run_LinEnum--Report.html">Report</a></li>
</ol>
<li><a href="HacktheBox--Linux_Boxes--cronos--Enumeration---dev-shm--schdeuled_laravel_owned_by_root.html">schdeuled laravel owned by root</a></li>
</ol>
</ol>
<li><a href="HacktheBox--Linux_Boxes--cronos--priv_esc_with_Kernel.php.html">priv esc with Kernel.php</a></li>
<ol>
<li><a href="HacktheBox--Linux_Boxes--cronos--priv_esc_with_Kernel.php--laravel_scheduling_task.html">laravel scheduling task</a></li>
<ol>
<li><a href="HacktheBox--Linux_Boxes--cronos--priv_esc_with_Kernel.php--laravel_scheduling_task--find_app-Console-Kernel.php.html">find app/Console/Kernel.php</a></li>
<li><a href="HacktheBox--Linux_Boxes--cronos--priv_esc_with_Kernel.php--laravel_scheduling_task--Kernel.php.html">Kernel.php</a></li>
</ol>
<li><a href="HacktheBox--Linux_Boxes--cronos--priv_esc_with_Kernel.php--setuid.c.html">setuid.c</a></li>
<ol>
<li><a href="HacktheBox--Linux_Boxes--cronos--priv_esc_with_Kernel.php--setuid.c--CURL_program_to_cronos.html">CURL program to cronos</a></li>
<li><a href="HacktheBox--Linux_Boxes--cronos--priv_esc_with_Kernel.php--setuid.c--update_Kernel.php-_change_owner_of_setuid.c_to_root.html">update Kernel.php/ change owner of setuid.c to root</a></li>
<li><a href="HacktheBox--Linux_Boxes--cronos--priv_esc_with_Kernel.php--setuid.c--move_getuid.c_to_tmp_folder_&_privesc.html">move getuid.c to tmp folder & privesc</a></li>
<li><a href="HacktheBox--Linux_Boxes--cronos--priv_esc_with_Kernel.php--setuid.c--root.html">root</a></li>
</ol>
</ol>
<li><a href="HacktheBox--Linux_Boxes--cronos--priv_esc_with_artisan.html">priv esc with artisan</a></li>
<ol>
<li><a href="HacktheBox--Linux_Boxes--cronos--priv_esc_with_artisan--php-reverse-shell.html">php-reverse-shell</a></li>
</ol>
<li><a href="HacktheBox--Linux_Boxes--cronos--priv_esc_with_kernel_exploit_dirty_cow.html">priv esc with kernel exploit dirty cow</a></li>
<li><a href="HacktheBox--Linux_Boxes--cronos--user-root.html">user/root</a></li>
<li><a href="HacktheBox--Linux_Boxes--cronos--lessons_learned.html">lessons learned</a></li>
</ol></div>
<div class="page"><h1><b><u>priv esc with artisan</u></b></h1><span style="color:#24ff00;">we know laravel runs </span><span style="color:#ffa500;">artisan</span><span style="color:#24ff00;"> but it runs a specific script within our laravel directory labeled </span><span style="color:#ffa500;">artisan</span><br /><img src="images/1106-1.png" alt="images/1106-1.png" /><br /><br /><span style="color:#24ff00;">if we check who owns this file, we see that we do, even though it is run by </span><span style="color:#ffff00;">root</span><span style="color:#24ff00;"> in the </span><span style="color:#ffa500;">cron job</span><br /><img src="images/1106-2.png" alt="images/1106-2.png" /><br /><br />as we see, we OWN artisan, which gives us the permission to rewrite it, so lets <span style="color:#ffff00;">overwrite/hijack</span><span style="color:#24ff00;"> artisan with a </span><span style="color:#ffa500;">php-reverse-shell</span><span style="color:#24ff00;"> back to our machine which will be run by root every time the </span><span style="color:#ffa500;">cron</span><span style="color:#24ff00;"> is called<br /><br />we can move our </span><span style="color:#ffa500;">php-reverse-shell</span><span style="color:#24ff00;"> and save it to the same name as artisan<br /></span></div></div>
</body></html>