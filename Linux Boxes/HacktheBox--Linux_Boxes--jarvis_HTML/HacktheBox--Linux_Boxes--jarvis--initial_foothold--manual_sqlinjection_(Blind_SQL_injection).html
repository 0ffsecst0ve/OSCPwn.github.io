<!doctype html><html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>manual sqlinjection (Blind SQL injection)</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="styles.css" type="text/css" />
</head>
<body><div class="main"><div class="tree">
<p><a href="../HacktheBox--Linux_Boxes.html">Linux Boxes</a></p>
<p><a href="HacktheBox--Linux_Boxes--jarvis.html">jarvis</a></p>

<ol>
<li><a href="HacktheBox--Linux_Boxes--jarvis--nmapAutomator.html">nmapAutomator</a></li>
<li><a href="HacktheBox--Linux_Boxes--jarvis--gobuster.html">gobuster</a></li>
<li><a href="HacktheBox--Linux_Boxes--jarvis--initial_foothold.html">initial foothold</a></li>
<ol>
<li><a href="HacktheBox--Linux_Boxes--jarvis--initial_foothold--manual_sqlinjection_(Blind_SQL_injection).html">manual sqlinjection (Blind SQL injection)</a></li>
<ol>
<li><a href="HacktheBox--Linux_Boxes--jarvis--initial_foothold--manual_sqlinjection_(Blind_SQL_injection)--Error_based_Blind_SQL_Injection.html">Error based Blind SQL Injection</a></li>
<li><a href="HacktheBox--Linux_Boxes--jarvis--initial_foothold--manual_sqlinjection_(Blind_SQL_injection)--revshell.php.html">revshell.php</a></li>
<li><a href="-jarvis--initial_foothold--manual_sqlinjection_(Blind_SQL_injection)--Exploit_the_SQL_injection_to_add_php_code_into_a_file_on_the_system.html">Exploit the SQL injection to add php code into a file on the system</a></li>
<li><a href="HacktheBox--Linux_Boxes--jarvis--initial_foothold--manual_sqlinjection_(Blind_SQL_injection)--reverse_shell.html">reverse shell</a></li>
</ol>
<li><a href="HacktheBox--Linux_Boxes--jarvis--initial_foothold--sqlmap.html">sqlmap</a></li>
<ol>
<li><a href="HacktheBox--Linux_Boxes--jarvis--initial_foothold--sqlmap--sqlmap_--os-shell.html">sqlmap --os-shell</a></li>
</ol>
</ol>
<li><a href="HacktheBox--Linux_Boxes--jarvis--privesc_to_pepper.html">privesc to pepper</a></li>
<ol>
<li><a href="HacktheBox--Linux_Boxes--jarvis--privesc_to_pepper--simpler.py.html">simpler.py</a></li>
<ol>
<li><a href="HacktheBox--Linux_Boxes--jarvis--privesc_to_pepper--simpler.py--ping_method.html">ping method</a></li>
</ol>
<li><a href="HacktheBox--Linux_Boxes--jarvis--privesc_to_pepper--simpler.py_privesc.html">simpler.py privesc</a></li>
</ol>
<li><a href="HacktheBox--Linux_Boxes--jarvis--privesc_to_root.html">privesc to root</a></li>
<ol>
<li><a href="HacktheBox--Linux_Boxes--jarvis--privesc_to_root--linEnum.sh.html">linEnum.sh</a></li>
<ol>
<li><a href="HacktheBox--Linux_Boxes--jarvis--privesc_to_root--linEnum.sh--SUID_files.html">SUID files</a></li>
</ol>
<li><a href="HacktheBox--Linux_Boxes--jarvis--privesc_to_root--lse.sh.html">lse.sh</a></li>
<li><a href="HacktheBox--Linux_Boxes--jarvis--privesc_to_root--system.ctl_GTFO.html">system.ctl GTFO</a></li>
<ol>
<li><a href="HacktheBox--Linux_Boxes--jarvis--privesc_to_root--system.ctl_GTFO--Systemctl_misconfigured_permissions_sudo-SUID.html">Systemctl misconfigured permissions sudo/SUID</a></li>
<li><a href="HacktheBox--Linux_Boxes--jarvis--privesc_to_root--system.ctl_GTFO--root.service.html">root.service</a></li>
</ol>
</ol>
<li><a href="HacktheBox--Linux_Boxes--jarvis--user-root.html">user/root</a></li>
<li><a href="HacktheBox--Linux_Boxes--jarvis--lessons_learned.html">lessons learned</a></li>
</ol></div>
<div class="page"><h1><b><u>manual sqlinjection (Blind SQL injection)</u></b></h1><span style="color:#24ff00;">since we have reason to believe the webserver is talking to a mysql backend </span><span style="color:#ffff00;">(hotel reservation website with hotel rooms, prices etc)</span><span style="color:#24ff00;">, we can verify our suspicions through a variety of different</span><span style="color:#ffa500;"> Blind SQL injections</span><span style="color:#24ff00;"> and see how the webserver responds</span><br /><br /><br /><span style="color:#24ff00;">first ,we can check whether or not the </span><span style="color:#ffa500;">sql query</span><span style="color:#24ff00;"> has </span><span style="color:#ffff00;">valid imput sanitation/vallidation</span><span style="color:#24ff00;"> by adding a single quote </span><span style="color:#ffa500;">'</span><span style="color:#24ff00;"> to see if the sql query breaks<br /><br />we know <br /></span><img src="images/1193-1.png" alt="images/1193-1.png" /><br />returns the superior family room<br /><img src="images/1193-2.png" alt="images/1193-2.png" /><br /><br />but if we were to add a single quote <span style="color:#ffa500;">'</span><br /><img src="images/1193-3.png" alt="images/1193-3.png" /><br />ir breaks the internal <span style="color:#ffa500;">sql query</span><span style="color:#24ff00;">, meaning there is </span><span style="color:#ffff00;">NO input validation or sanitation</span><span style="color:#24ff00;"> (through single quote escapes)<br /></span><img src="images/1193-4.png" alt="images/1193-4.png" /><br /><br /><br />for sql enumeration to be the most effective, it is crucial to find out how many columns the database is using for our <span style="color:#ffa500;">blind SQL injection</span><span style="color:#24ff00;">, because otherwise our injection will not output correctly if at all. Luckily enough a simple way to find out how many columns this database has is to simply </span><span style="color:#ffff00;">increment</span><span style="color:#24ff00;"> a </span><span style="color:#ffa500;">Union SELECT</span><span style="color:#24ff00;"> statement and see if the webpage spits out anything interesting from the backend database<br /><br />to find out the exact number of colums, we'll keep adding column numbers to our mysql query until the database comes back with a non-error so<br /></span><span style="color:#ffa500;">union select 1<br />union select 1,2<br />union select 1,2,3<br />union select 1,2,3,4<br />union select 1,2,3,4,5<br />union select 1,2,3,4,5,6</span><span style="color:#24ff00;"><br />all show empty server responses<br /></span><img src="images/1193-5.png" alt="images/1193-5.png" /><br /><br />BUT<br /><span style="color:#ffa500;">/room.php?cod=9999 union select 1,2,3,4,5,6,7</span><br /><img src="images/1193-6.png" alt="images/1193-6.png" /><br /><img src="images/1193-7.png" alt="images/1193-7.png" /><br /><span style="color:#ffff00;">bingo</span><span style="color:#24ff00;">! because the webserver is spitting out a bunch of random outputs that make no sense, we know our webserver has issued a valid mysql statement on the database as well as the fact that the database has</span><span style="color:#ffff00;"> 7</span><span style="color:#24ff00;"> columns <br /><br />now comes the fun part!<br /></span></div></div>
</body></html>