<!doctype html><html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>mounting smb account share</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="styles.css" type="text/css" />
</head>
<body><div class="main"><div class="tree">
<p><a href="../HacktheBox--Windows_Boxes.html">Windows Boxes</a></p>
<p><a href="HacktheBox--Windows_Boxes--tally.html">tally</a></p>

<ol>
<li><a href="HacktheBox--Windows_Boxes--tally--nmap.html">nmap</a></li>
<ol>
<li><a href="HacktheBox--Windows_Boxes--tally--nmap--all_ports.html">all ports</a></li>
<li><a href="HacktheBox--Windows_Boxes--tally--nmap--gobuster.html">gobuster</a></li>
<ol>
<li><a href="HacktheBox--Windows_Boxes--tally--nmap--gobuster--sharepoint.html">sharepoint</a></li>
<ol>
<li><a href="HacktheBox--Windows_Boxes--tally--nmap--gobuster--sharepoint--viewlists.aspx.html">viewlists.aspx</a></li>
<ol>
<li><a href="HacktheBox--Windows_Boxes--tally--nmap--gobuster--sharepoint--viewlists.aspx---Documents.html">/Documents</a></li>
<li><a href="HacktheBox--Windows_Boxes--tally--nmap--gobuster--sharepoint--viewlists.aspx--Site_Pages.html">Site Pages</a></li>
</ol>
</ol>
</ol>
</ol>
<li><a href="HacktheBox--Windows_Boxes--tally--ftp.html">ftp</a></li>
<ol>
<li><a href="HacktheBox--Windows_Boxes--tally--ftp--find_._-type_f.html">find . -type f</a></li>
</ol>
<li><a href="HacktheBox--Windows_Boxes--tally--keepass.html">keepass</a></li>
<ol>
<li><a href="HacktheBox--Windows_Boxes--tally--keepass--kpcli_-kdb_tim.kdbx.html">kpcli -kdb tim.kdbx</a></li>
</ol>
<li><a href="HacktheBox--Windows_Boxes--tally--smb.html">smb</a></li>
<ol>
<li><a href="HacktheBox--Windows_Boxes--tally--smb--mounting_smb_account_share.html">mounting smb account share</a></li>
<li><a href="HacktheBox--Windows_Boxes--tally--smb--connecting_to_the_smb_share_with_smbclient.html">connecting to the smb share with smbclient</a></li>
<ol>
<li><a href="HacktheBox--Windows_Boxes--tally--smb--connecting_to_the_smb_share_with_smbclient--zz_Archived_(dead_end).html">zz_Archived (dead end)</a></li>
<li><a href="HacktheBox--Windows_Boxes--tally--smb--connecting_to_the_smb_share_with_smbclient--zz_Migration-Binaries-New_Folder-tester.exe.html">zz_Migration/Binaries/New Folder/tester.exe</a></li>
</ol>
</ol>
<li><a href="HacktheBox--Windows_Boxes--tally--sqsh_interactive_database_shell.html">sqsh interactive database shell</a></li>
<ol>
<li><a href="HacktheBox--Windows_Boxes--tally--sqsh_interactive_database_shell--xp_cmdshell_does_not_exist.html">xp_cmdshell does not exist</a></li>
<li><a href="HacktheBox--Windows_Boxes--tally--sqsh_interactive_database_shell--reconfigure.html">reconfigure</a></li>
<li><a href="HacktheBox--Windows_Boxes--tally--sqsh_interactive_database_shell--xp_cmdshell_'whoami'.html">xp_cmdshell 'whoami'</a></li>
<li><a href="HacktheBox--Windows_Boxes--tally--sqsh_interactive_database_shell--powershell_IEX_revshell.html">powershell IEX revshell</a></li>
</ol>
<li><a href="HacktheBox--Windows_Boxes--tally--privesc_w-_juicy_potato.html">privesc w/ juicy potato</a></li>
<ol>
<li><a href="HacktheBox--Windows_Boxes--tally--privesc_w-_juicy_potato--juicy_potato.html">juicy potato</a></li>
</ol>
<li><a href="HacktheBox--Windows_Boxes--tally--priv_esc_w-_scheduled_task.html">priv esc w/ scheduled task</a></li>
<ol>
<li><a href="HacktheBox--Windows_Boxes--tally--priv_esc_w-_scheduled_task--SPBestWarmUp.ps1.html">SPBestWarmUp.ps1</a></li>
<li><a href="HacktheBox--Windows_Boxes--tally--priv_esc_w-_scheduled_task--reverse_shell.html">reverse shell</a></li>
</ol>
<li><a href="HacktheBox--Windows_Boxes--tally--user-root.html">user/root</a></li>
<li><a href="HacktheBox--Windows_Boxes--tally--Lessons_Learned.html">Lessons Learned</a></li>
</ol></div>
<div class="page"><h1><b><u>mounting smb account share</u></b></h1><span style="color:#24ff00;">step 1: make an smb directory in our attack machine's /mnt folder</span><br /><img src="images/1712-1.png" alt="images/1712-1.png" /><br /><br /><span style="color:#24ff00;">Mount example:</span><br /><span style="color:#ffa500;">sudo mount -t cifs -o "domain=MYDOMAIN,username=MyUserName,password=myPas$werd,sec=ntlm" //&lt;your windows host ip&gt;/&lt;your remote share name&gt; /mnt/my_mount_dir</span><br /><br /><br /><br /><strong><span style="color:#ffa500;">mount -t cifs -o username=Finance //10.10.10.59/ACCT /mnt/smb</span></strong><br /><span style="color:#24ff00;">our leaked password was </span><span style="color:#ffff00;">Acc0unting</span><br /><img src="images/1712-2.png" alt="images/1712-2.png" /><br /><br /><span style="color:#24ff00;">rummaging through the file share, there is a directory named </span><span style="color:#ffa500;">New Folder</span><span style="color:#24ff00;"> within the</span><span style="color:#ffa500;"> zz_Migration</span><span style="color:#24ff00;"> folder</span> <span style="color:#24ff00;">which is suspicious as to why it was never named anything specific</span><br /><img src="images/1712-3.png" alt="images/1712-3.png" /><br /><br /><span style="color:#ffa500;">tester.exe</span><span style="color:#24ff00;"> is the oldest and most peculular looking </span><span style="color:#ffa500;">.exe </span><span style="color:#24ff00;">in the directory, it was hardcoded by the devs and is not a commercial off the shelf executable so lets check it to see if it has any credentials hard coded:</span><br /><br /><span style="color:#ffa500;">strings tester.exe | grep PWD</span><br /><img src="images/1712-4.png" alt="images/1712-4.png" /><br /><br /><span style="color:#24ff00;">there is an SQL Server with user info and a password hardcoded into the .exe</span>!<br /><span style="color:#ffff00;">DRIVER={SQL Server};SERVER=TALLY, 1433;DATABASE=orcharddb;UID=sa;PWD=GWE3V65#6KFH93@4GWTG2G;</span><br /></div></div>
</body></html>