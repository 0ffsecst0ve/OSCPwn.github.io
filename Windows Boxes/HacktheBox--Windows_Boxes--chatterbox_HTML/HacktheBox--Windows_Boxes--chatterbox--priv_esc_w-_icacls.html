<!doctype html><html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>priv esc w/ icacls</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="styles.css" type="text/css" />
</head>
<body><div class="main"><div class="tree">
<p><a href="../HacktheBox--Windows_Boxes.html">Windows Boxes</a></p>
<p><a href="HacktheBox--Windows_Boxes--chatterbox.html">chatterbox</a></p>

<ol>
<li><a href="HacktheBox--Windows_Boxes--chatterbox--nmap.html">nmap</a></li>
<ol>
<li><a href="HacktheBox--Windows_Boxes--chatterbox--nmap--all_ports.html">all ports</a></li>
<li><a href="HacktheBox--Windows_Boxes--chatterbox--nmap--targeted.html">targeted</a></li>
</ol>
<li><a href="HacktheBox--Windows_Boxes--chatterbox--AChat.html">AChat</a></li>
<ol>
<li><a href="HacktheBox--Windows_Boxes--chatterbox--AChat--serachsploit.html">serachsploit</a></li>
<ol>
<li><a href="HacktheBox--Windows_Boxes--chatterbox--AChat--serachsploit--code.html">code</a></li>
</ol>
</ol>
<li><a href="HacktheBox--Windows_Boxes--chatterbox--initial_foothold.html">initial foothold</a></li>
<ol>
<li><a href="HacktheBox--Windows_Boxes--chatterbox--initial_foothold--msfvenom.html">msfvenom</a></li>
<li><a href="HacktheBox--Windows_Boxes--chatterbox--initial_foothold--buff_overflow_code.html">buff overflow code</a></li>
<li><a href="HacktheBox--Windows_Boxes--chatterbox--initial_foothold--user_Alfred_enum.html">user Alfred enum</a></li>
</ol>
<li><a href="HacktheBox--Windows_Boxes--chatterbox--priv_esc_w-_icacls.html">priv esc w/ icacls</a></li>
<li><a href="HacktheBox--Windows_Boxes--chatterbox--priv_esc_with_powershell.html">priv esc with powershell</a></li>
<ol>
<li><a href="HacktheBox--Windows_Boxes--chatterbox--priv_esc_with_powershell--msfvenom_w-_powershell_reverse_tcp_payload.html">msfvenom w/ powershell reverse tcp payload</a></li>
<li><a href="HacktheBox--Windows_Boxes--chatterbox--priv_esc_with_powershell--msfvenom_with_cmd-exec_download.html">msfvenom with cmd/exec download</a></li>
<ol>
<li><a href="HacktheBox--Windows_Boxes--chatterbox--priv_esc_with_powershell--msfvenom_with_cmd-exec_download--msfvenom_windows-exec.html">msfvenom windows/exec</a></li>
<li><a href="HacktheBox--Windows_Boxes--chatterbox--priv_esc_with_powershell--msfvenom_with_cmd-exec_download--listener_on_6666.html">listener on 6666</a></li>
</ol>
<li><a href="HacktheBox--Windows_Boxes--chatterbox--priv_esc_with_powershell--powerup.ps1.html">powerup.ps1</a></li>
<li><a href="HacktheBox--Windows_Boxes--chatterbox--priv_esc_with_powershell--privileged_reverse_shell.html">privileged reverse shell</a></li>
</ol>
<li><a href="HacktheBox--Windows_Boxes--chatterbox--user-root.html">user/root</a></li>
<li><a href="HacktheBox--Windows_Boxes--chatterbox--Lessons_learned.html">Lessons learned</a></li>
</ol></div>
<div class="page"><h1><b><u>priv esc w/ icacls</u></b></h1><span style="color:#24ff00;">although we are only logged in as user </span><span style="color:#ffff00;">Alfred</span><span style="color:#24ff00;">, we have access to the </span><span style="color:#ffff00;">Administrator</span><span style="color:#24ff00;">'s folder<br /><br /></span><img src="images/964-1.png" alt="images/964-1.png" /><br /><img src="images/964-2.png" alt="images/964-2.png" /><br /><br /><span style="color:#24ff00;">although we are not technically an adminstative account, we can check whether or not user </span><span style="color:#ffff00;">alfred</span><span style="color:#24ff00;"> has </span><span style="color:#ffa500;">administrative permissions/access</span><span style="color:#24ff00;"> control on certain files and folders using </span><span style="color:#ffa500;">icalcs</span><span style="color:#24ff00;"> commands, like </span><span style="color:#ffa500;">chmod</span><span style="color:#24ff00;"> in linux</span><br /><img src="images/964-3.png" alt="images/964-3.png" /><br /><br /><span style="color:#ffa500;">icacls root.txt</span><br /><img src="images/964-4.png" alt="images/964-4.png" /><br /><span style="color:#24ff00;">we see only Chatterbox/Administrator has read &amp; write access to this file </span><br /><br /><span style="color:#24ff00;">lets check our permissions on the Desktop directory itself </span><br /><span style="color:#ffa500;">icalcs Desktop</span><br /><img src="images/964-5.png" alt="images/964-5.png" /><br /><span style="color:#24ff00;">We have</span><span style="color:#ffff00;"> full access (F) </span><span style="color:#24ff00;">on the Desktop directory. </span><img src="images/964-6.png" alt="images/964-6.png" /> Which  Alfred user is also configured to own the root.txt file.<br /><br /><img src="images/964-7.png" alt="images/964-7.png" /><br /><span style="color:#24ff00;">So we can simply grant ourselves </span><span style="color:#ffff00;">root access </span><span style="color:#24ff00;">to </span><span style="color:#ffa500;">root.txt </span><span style="color:#24ff00;">using the following command.</span><br /><br /><span style="color:#ffa500;">icacls root.txt /grant alfred:F</span><br /><img src="images/964-8.png" alt="images/964-8.png" /><br /><br /><span style="color:#ffa500;">We should now be able to view the root.txt flag.</span><br /><img src="images/964-9.png" alt="images/964-9.png" /><br />a673d1b1fa95c276c5ef2aa13d9dcc7c<br /><br /></div></div>
</body></html>